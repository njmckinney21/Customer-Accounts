/*
Nathan McKinney and Levi Leuthold
Created: 5/17/17
Modified: 5/18/18 - Added main functions and prototypes
Group project: Customers Accounts
Rogue Community College - Computer Science Department - Teacher: Cynthia Patterson
*/
#include <iostream>
#include <fstream>
using std::cout;
using std::cin;
using std::endl;
using std::ios;
using std::fstream;


//const for array size
const int NAME_SIZE = 30;
const int DATE_SIZE = 11;
const int ADDRESS_SIZE = 60;
const int CITY_STATE_ZIP = 100;

//sructure defintion
struct Customer
{
	char name[NAME_SIZE];
	char address[ADDRESS_SIZE];
	char CityStateZip[CITY_STATE_ZIP];
	int telephoneNumber;
	double accountBalance;
	char lastPayment[DATE_SIZE];
};

//function prototypes
void addAccount(fstream &);
void viewAccount(fstream &);
void changeAccount(fstream &);
void deleteAccount(fstream &);
void viewAll(fstream &);

int main()
{
	fstream customerAccounts;
	int choice;
	//display the menu and get choice
	do
	{
		//display menu
		cout << "1. Add a new account\n";
		cout << "2. View an existing account\n";
		cout << "3. Change an existing account\n";
		cout << "4. Delete an existing account\n";
		cout << "5. View all the accounts\n";
		cout << "6. Exit\n";

		//get users choice
		cout << "Enter your choice(1-6): ";
		cin >> choice;

		//validate the choice
		while (choice < 1 || choice > 6)
		{
			cout << "Error re-enter your choice (between 1-6): ";
			cin >> choice;
		}

		//process the selection 
		switch (choice)
		{
		case 1:
			addAccount(customerAccounts);
			break;
		case 2:
			viewAccount(customerAccounts);
			break;
		case 3:
			changeAccount(customerAccounts);
			break;
		case 4:
			deleteAccount(customerAccounts);
			break;
		case 5:
			viewAll(customerAccounts);
			break;

		}
	} while (choice != 6);

	return 0;
}

void addAccount(fstream & customerFile)
{
	//inventory variable to hold input
	Customer account;

	//open the file to append to a file in binary format
	customerFile.open("customer.dat", ios::out | ios::app | ios::binary);

	if (customerFile.fail())
	{
		cout << "Error opening the file.\n";
		exit(EXIT_FAILURE);
	}

	cin.get();
	cout << "\nName (Enter the first name of no more than 29 characters): ";
	cin.getline(account.name, NAME_SIZE);
	cout << "Address: ";
	cin.getline(account.address, ADDRESS_SIZE);
	cout << "Enter the city, state, and zip: ";
	cin.getline(account.CityStateZip, CITY_STATE_ZIP);
	cout << "Telephone Number (No special characters): ";
	cin >> account.telephoneNumber;
	cout << "Account Balance: ";
	cin >> account.accountBalance;
	cout << "Date of last payment (format: dd/mm/yyyy): ";
	cin >> account.lastPayment;

	//write the record
	customerFile.write(reinterpret_cast<char*>(&account), sizeof(account));
	if (customerFile.fail())
	{
		cout << "Error writing record to file.\n";
	}
	else
	{
		cout << "Record written to file.\n\n";
	}
	customerFile.close();
}

void viewAccount(fstream & customerFile)
{

}

void changeAccount(fstream & customerFile)
{

}

void deleteAccount(fstream & customerFile)
{

}

void viewAll(fstream & customerFile)
{

}
